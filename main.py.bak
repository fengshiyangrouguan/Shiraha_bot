import os
import asyncio
import sys

from src.common.log.setup import setup_global_logging

sys.path.append(os.path.dirname(os.path.dirname(os.path.abspath(__file__))))


LOGO =(
"""
                                                      
                                                    
                          @@@@@                     
                          @@@@@@@                         
           @ @@           @@@@@@@@@                       
          @   @@          @@@@@@@@@@@                    
         @      @         @@@@@@@@@@@@                    
         @     @@@        @@@@@@ @ @@@@                   
         @   @@@@@@       @@@@@@@@@  @@@@                
        @@  @@@@@@@@      @@@@@@@@@@@ @@@@                
        @@@@@@@@@@@@@     @@@@@@@@@@@@@@@@@               
        @@@ @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@          
        @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@         
        @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@      
        @@@  @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@      
         @@@@ @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@    
         @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@   
         @@@@@@@@@@@@@@@@@@@@ @@@@@@@@      @@@@@@@@@@  @   
         @@@@@@@@@@@@@@@@@@@  @@@@ @@         @@@@@@@@@  @  
         @@@@@@@@@@@@@@@@@   @@@   @   @@@@    @@@@@@@@@ @  
         @@@@@@@@@       @@        @  @@@@@     @@@@@@@@  @ 
         @@@@@@@@     @@@  @       @  @@@@@     @@@@@@@@  @ 
        @@@@@@@@     @@@@@  @      @   @@@@    @@@@@@@@@  @@
       @@@@@@@@@     @@@@@  @@     @   @@@    @@@@@@@@@   @ 
       @@@@@@@@@      @@@@   @             @@ @@@@@@@@   @  
      @@@@@@@@@@@     @@@    @        @@@@    @@@@@@@    @ @
      @@@@@@@@@@@@          @                  @@@      @   
     @@@@@@@@@@@@@@      @@                   @@      @@    
     @  @@@@@@@@@@                          @@        @     
        @@@@@@@@@@@      @                 @          @@@@  
       @@@@@@@@@@@@@  @ @         @ @    @              @@@@
      @   @@@@@@@@@@@@@          @     @@                   
           @@@@@@@@@@@@              @                      
             @@@@@@@@@@@@@       @@@                 @      
                @@@@@@@@@@@@@@@@@@          @       @@     @
                @@@@@@@@@@@@@@@           @@      @@       @
               @         @               @      @@@       @@
@@                       @          @  @       @@@          
   @                      @@@@@@@@@ @@       @@@@           
    @                        @@            @@@@@    @@@@@@@@
    @@                        @@@       @@@@@@    @@@@     @
"""

)
def check_env():
    """
    检查项目的运行环境是否满足最低要求，并确保所需的目录结构存在。

    Args:
        None

    Returns:
        None

    Raises:
        SystemExit: 如果 Python 版本不符合要求（低于 3.10），程序会记录错误信息后退出。
    """
    if not (sys.version_info.major == 3 and sys.version_info.minor >= 10):
        logger.error("请使用 Python3.10+ 运行本项目。")
        exit()

    os.makedirs("configs", exist_ok=True)
    os.makedirs("data/plugins", exist_ok=True)
    os.makedirs("logs", exist_ok=True)


if __name__ == "__main__":
    
    logger = setup_global_logging()
    check_env()
    #db = db_helper
    logger.info(LOGO)

    # 依赖注入db，启动主程序
    #core_lifecycle = InitialLoader(db, log_broker)
    #asyncio.run(core_lifecycle.start())
